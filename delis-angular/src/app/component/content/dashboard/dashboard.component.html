<mat-card>
    <div class="example-container mat-elevation-z8">
        <mat-card-content class="dashboard-dynamic-height">
            <mat-tab-group dynamicHeight (selectedIndexChange)="selectedIndexChange($event)">
                <mat-tab label="{{ 'dashboard.documents' | translate }}">
                    <mat-accordion *ngIf="isUser(); else elseBlockAdmin">
                        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false" *ngFor="let document of dashboardDocumentUserDataList">
                            <mat-expansion-panel-header>
                                <mat-panel-title>
                                    Receiver: {{ document.receiverIdentifierName }}
                                </mat-panel-title>
                                <mat-panel-description>
                                    Count: {{ document.countDocuments }}
                                </mat-panel-description>
                                <mat-panel-description>
                                    Average: {{ document.countDocuments / 6 | number:'.1-2' }}
                                </mat-panel-description>
                            </mat-expansion-panel-header>

                            <div *ngIf="document.countDocuments !== 0">
                                <app-dashboard-document-user [data]="document"></app-dashboard-document-user>
                            </div>

                        </mat-expansion-panel>
                    </mat-accordion>
                </mat-tab>

                <ng-template #elseBlockAdmin>
                    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false" *ngFor="let document of dashboardDocumentAdminDataList">
                        <mat-expansion-panel-header>
                            <mat-panel-title>
                                Organisation: {{ document.organisation }}
                            </mat-panel-title>
                            <mat-panel-description>
                                Count: {{ document.countDocuments }}
                            </mat-panel-description>
                            <mat-panel-description>
                                Average: {{ document.countDocuments / 6 | number:'.1-2' }}
                            </mat-panel-description>
                        </mat-expansion-panel-header>

                        <div *ngIf="document.countDocuments !== 0">
                            <app-dashboard-document-admin [data]="document"></app-dashboard-document-admin>
                        </div>

                    </mat-expansion-panel>
                </ng-template>

                <mat-tab label="{{ 'dashboard.errors' | translate }}">
                    <mat-accordion *ngIf="isUser(); else elseBlockAdminError">
                        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false" *ngFor="let document of dashboardDocumentUserErrorDataList">
                            <mat-expansion-panel-header>
                                <mat-panel-title>
                                    Organisation: {{ document.receiverIdentifierName }}
                                </mat-panel-title>
                                <mat-panel-description>
                                    Count: {{ document.countDocuments }}
                                </mat-panel-description>
                                <mat-panel-description>
                                    Average: {{ document.countDocuments / 6 | number:'.1-2' }}
                                </mat-panel-description>
                            </mat-expansion-panel-header>

                            <div *ngIf="document.countDocuments !== 0">
                                <app-dashboard-document-user [data]="document"></app-dashboard-document-user>
                            </div>

                        </mat-expansion-panel>
                    </mat-accordion>
                </mat-tab>

                <ng-template #elseBlockAdminError>
                    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false" *ngFor="let document of dashboardDocumentAdminErrorDataList">
                        <mat-expansion-panel-header>
                            <mat-panel-title>
                                Organisation: {{ document.organisation }}
                            </mat-panel-title>
                            <mat-panel-description>
                                Count: {{ document.countDocuments }}
                            </mat-panel-description>
                            <mat-panel-description>
                                Average: {{ document.countDocuments / 6 | number:'.1-2' }}
                            </mat-panel-description>
                        </mat-expansion-panel-header>

                        <div *ngIf="document.countDocuments !== 0">
                            <app-dashboard-document-admin [data]="document"></app-dashboard-document-admin>
                        </div>

                    </mat-expansion-panel>
                </ng-template>

                <mat-tab label="{{ 'dashboard.send' | translate }}">
                    <mat-accordion>
                        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false" *ngFor="let document of dashboardSendDocumentDataList">
                            <mat-expansion-panel-header>
                                <mat-panel-title>
                                    Organisation: {{ document.organisation }}
                                </mat-panel-title>
                                <mat-panel-description>
                                    Count: {{ document.countSendDocuments }}
                                </mat-panel-description>
                                <mat-panel-description>
                                    Average: {{ document.countSendDocuments / 6 | number:'.1-2' }}
                                </mat-panel-description>
                            </mat-expansion-panel-header>

                            <div *ngIf="document.countSendDocuments !== 0">
                                <app-dashboard-send-document [data]="document"></app-dashboard-send-document>
                            </div>

                        </mat-expansion-panel>
                    </mat-accordion>
                </mat-tab>
            </mat-tab-group>
        </mat-card-content>

        <mat-card-content class="dashboard-dynamic-height">
            <mat-tab-group [selectedIndex]="selected">
                <mat-tab *ngFor="let label of labels; index as i"  label="{{ label | translate}}">
                    <mat-card-content style="margin: 2em">
                        <app-chart-document [chartIndex]="i"></app-chart-document>
                    </mat-card-content>
                </mat-tab>
            </mat-tab-group>
        </mat-card-content>

    </div>
</mat-card>
