<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	th:replace="~{fragments/layout :: layout (~{::body})}">
<body>
	<div class="card border-primary">
		<div class="card-header bg-primary text-white">
			Document sending
		</div>
		<div class="card-body">
			<form action="#" th:action="@{/document/send/updatestatuses}" th:object="${selectedIdList}" method="post">
			<table class="table table-striped table-bordered table-sm">
				<tr>
                    <th>
						<input type="checkbox" class="selectAll checkbox" name="selectAll" id="selectAll" />
					</th>
					<th>Created</th>
					<th>Organisation</th>
					<th>Sender</th>
					<th>Receiver</th>
					<th>Status</th>
					<th>Document Type</th>
					<th>Delivered</th>
				</tr>
				<tr th:each="r,iter : ${documentList}">
					<td><input type="checkbox" th:field="*{idList}" th:value="${r.id}" class="selectItem checkbox" name="selectItem" id="selectItem"/></td>
					<td>
						<a href="#" th:href="@{/document/send/view/__${r.id}__}" th:text="${#dates.format(r.createTime, 'yyyy-MM-dd HH:mm:ss')}">2018-10-12 10:43:22</a>
					</td>
					<td>
						<a th:if="${r.organisation}" href="#" th:href="@{/organisation/view/__${r.organisation.id}__}" th:text="${r.organisation.name}">Region Nord</a>
					</td>
					<td>
						<span th:text="${r.senderIdRaw}">0088:234234234</span>
					</td>
					<td>
						<span th:text="${r.receiverIdRaw}">0088:234234234</span>
					</td>
					<td th:text="${r.documentStatus?.name}" th:classappend="${r.documentStatus?.error ? 'document-error': ''}">LOAD_OK</td>
					<td th:text="${r.documentType?.name}">INVOICE</td>
					<td th:text="${r.deliveredTime}"><span th:text="${#dates.format(r.createTime, 'yyyy-MM-dd HH:mm:ss')}">2018-10-12 10:43:22</span></td>
				</tr>
			</table>
			<div class="card-footer">
				<div class="d-flex justify-content-start">
					<label class="m-2 col-form-label">Status:</label>
					<select th:field="*{status}" class="m-2">
						<option th:each="documentStatus : ${statusList}" th:text="${documentStatus.getName()}" th:value="${documentStatus}"></option>
					</select>
					<button type="submit" class="m-2 btn btn-primary">Update Statuses</button>
				</div>
			</div>
			</form>
		</div>
	</div>

	<div class="card">
		<div class="card-header bg-primary text-white">
			Upload document
		</div>
		<div class="card-body">
			<form method="POST" enctype="multipart/form-data" action="/document/send/upload" th:action="@{/document/send/upload}">
				<div class="form-group">
					<label for="file1">File:</label>
					<input type="file" name="file" class="form-control-file" id="file1" />
				</div>
				<div class="form-check mb-2">
					<input type="checkbox" name="validateImmediately" class="form-check-input" id="validateImmediately" th:checked="true" readonly="readonly" />
					<label for="validateImmediately" class="form-check-label">Validate immediately</label>
				</div>
				<input class="btn btn-primary" type="submit" value="Upload" />
			</form>
		</div>
	</div>
	
</body>
</html>
