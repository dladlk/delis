<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	th:replace="~{fragments/layout :: layout (~{::body})}">
<body>

	<div th:replace="~{fragments/org-menu :: org-menu (~{::body}, 'identifiers')}"></div>

	<div class="card border-primary">
		<div class="card-header bg-primary text-white">
			<span th:text="${organisation.name}">Organisation name</span>
			(<span th:text="${organisation.code}">Code</span>)
		</div>
		<div class="card-body">
			<table class="table table-striped table-bordered table-sm">
				<tr>
					<th>Identifiers total</th>
					<th:block th:if="${!stat.isNoPublish()}">
					<th>Active published</th>
					<th>Pending active</th>
					<th>Pending deletion</th>
					<th>Failed publishing</th>
					</th:block>
				</tr>
				<tr th:if="${stat}">
					<td><a href="#" th:href="@{/identifier/list/__${organisation.id}__}" th:text="${stat.total}"></a></td>
					<th:block th:if="${!stat.isNoPublish()}">
					<td th:text="${stat.activeDone}">7</td>
					<td th:text="${stat.activePending}">1</td>
					<td th:text="${stat.disabledPending}">1</td>
					<td th:text="${stat.failed}">1</td>
					</th:block>
				</tr>
			</table>
		</div>
		<div class="card-footer">
			<button type="submit" class="btn btn-sm ml-2 btn-primary">Validate published data to SMP</button>
		</div>
	</div>
	
	<div class="card">
		<div class="card-header bg-primary text-white">
			Upload identifier list
		</div>
		<div class="card-body">
			<form method="POST" enctype="multipart/form-data" action="/organisation/upload/213" th:action="@{/organisation/upload/__${organisation.id}__}">
				<div class="form-group">
					<label for="file1">File:</label><input type="file" name="file" class="form-control-file" id="file1" />
				</div>
				<input class="btn btn-primary" type="submit" value="Upload" />
			</form>
		</div>
	</div>
	
	<div class="card">
		<div class="card-header bg-primary text-white">
			Journal records
		</div>
		<div class="card-body">
			<table class="table table-striped table-bordered table-sm">
				<tr>
					<th>Date</th>
					<th>Message</th>
					<th>Duration, ms</th>
				</tr>
				<tr th:each="r,iter : ${lastJournalList}">
					<td th:text="${r.createTime}"></td>
					<td th:text="${r.message}"></td>
					<td th:text="${r.durationMs}"/>
				</tr>
			</table>
		</div>
	</div>

	<div class="card">
		<div class="card-header bg-primary text-white">
			Synchronizations
		</div>
		<div class="card-body">
			<table class="table table-striped table-bordered table-sm">
				<tr>
					<th>Date</th>
					<th>Message</th>
					<th>Duration, ms</th>
					<th>Total</th>
					<th>Equal</th>
					<th>Add</th>
					<th>Update</th>
					<th>Delete</th>
					<th>Failed</th>
				</tr>
				<tr th:each="r,iter : ${lastSyncFactList}">
					<td th:text="${r.createTime}"></td>
					<td th:text="${r.description}"></td>
					<td th:text="${r.durationMs}"/>
					<td th:text="${r.total}"/>
					<td th:text="${r.equal}"/>
					<td th:text="${r.add}"/>
					<td th:text="${r.update}"/>
					<td th:text="${r.delete}"/>
					<td th:text="${r.failed}"/>
				</tr>
			</table>
		</div>
	</div>
	
</body>
</html>